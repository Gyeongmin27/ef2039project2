# AI 기반 패션 스타일 평가 시스템 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트명

AI 기반 패션 스타일 평가 시스템 (Fashion Style Scoring System)

### 1.2 프로젝트 목적

사용자가 상하의를 모두 입고 있는 실제 사진을 업로드하면, AI가 패션 스타일을 종합적으로 분석하여 총점과 세부 점수를 제공하고, 개선 방안을 제시하는 웹 애플리케이션을 개발합니다.

### 1.3 프로젝트 범위

- 웹 기반 인터페이스 제공
- 실제 사람 사진 업로드 및 처리
- AI 기반 패션 스타일 종합 분석
- 점수 체계 기반 평가 시스템
- 세부 점수 및 개선점 제공

---

## 2. 목표 및 목적

### 2.1 비즈니스 목표

- 사용자의 패션 스타일에 대한 객관적이고 전문적인 평가 제공
- 패션 감각 향상을 위한 실용적인 피드백 제공
- AI 기반 패션 컨설팅 서비스 구현

### 2.2 사용자 목표

- 자신의 패션 스타일에 대한 객관적 평가 획득
- 구체적인 개선 방안 파악
- 패션 감각 향상을 위한 학습 기회 제공

---

## 3. 기능 요구사항

### 3.1 핵심 기능

#### 3.1.1 이미지 업로드 기능

- **실제 사람 사진 업로드**
  - 단일 이미지 업로드 (1장)
  - 드래그 앤 드롭 또는 파일 선택 방식
  - 지원 이미지 형식: JPG, JPEG, PNG, WebP
  - 이미지 크기 제한: 최대 20MB
  - 업로드 전 이미지 미리보기
  - 이미지 자동 리사이징 (선택사항)

- **TPO (Time, Place, Occasion) 선택 기능**
  - 이미지 업로드 전 상황 정보 입력
  - **Time (시간)**: 아침, 오후, 저녁, 밤
  - **Place (장소)**: 사무실, 학교, 카페, 레스토랑, 파티/행사, 야외, 캐주얼
  - **Occasion (상황)**: 일상, 비즈니스, 데이트, 정장, 캐주얼, 운동
  - TPO 정보는 상황적합성 평가에 활용됨

#### 3.1.2 AI 분석 기능

- **의류 인식 및 분리**

  - 상의 영역 자동 인식 및 추출
  - 하의 영역 자동 인식 및 추출
  - 배경 제거 또는 인물 분리 (선택사항)

- **패션 요소 분석**
  - 색상 분석 (상의, 하의, 전체 조화)
  - 패턴 인식 (무지, 줄무늬, 체크, 플로럴 등)
  - 스타일 분류 (캐주얼, 포멀, 스포츠 등)
  - 텍스처 분석 (면, 데님, 니트 등)
  - 실루엣 및 비율 분석
  - 계절성 및 상황 적합성 분석
    `

#### 3.1.3 점수 평가 기능

- **종합 점수 계산**

  - 총점: 0-100점 (또는 별점 1-5점)
  - 세부 점수 항목별 계산
  - 점수 등급 표시 (S, A, B, C, D 등급)

- **세부 점수 표시**
  - 각 평가 항목별 점수 시각화
  - 점수 차트/그래프 제공
  - 항목별 가중치 표시

#### 3.1.4 개선점 제시 기능

- **구체적인 개선 방안**
  - 낮은 점수 항목에 대한 피드백
  - 색상 조합 개선 제안
  - 스타일 조정 권장사항
  - 액세서리 추천 (선택사항)

- **구매 추천 아이템 기능**
  - AI 기반 구매 추천 아이템 생성 (Gemini API 활용)
  - 개선이 필요한 항목을 기반으로 구체적인 아이템 추천
  - 각 추천 아이템 정보:
    - 카테고리 (상의, 하의, 액세서리)
    - 아이템 이름 및 설명
    - 추천 색상 (HEX 코드)
    - 스타일 정보
    - 추천 이유
  - 무신사 사이트 검색 연동
    - 각 추천 아이템에 "무신사에서 검색하기" 버튼 제공
    - 클릭 시 무신사 검색 페이지로 이동하여 해당 아이템 검색

### 3.2 부가 기능

#### 3.2.1 결과 관리

- 평가 결과 저장 (선택사항)
- 이전 평가 결과 조회 (선택사항)
- 결과 비교 기능 (선택사항)

#### 3.2.2 사용자 인터페이스

- 반응형 디자인 (모바일, 태블릿, 데스크톱 지원)
- 다크 모드 지원 (선택사항)
- 로딩 상태 표시
- 에러 처리 및 사용자 피드백
- 결과 공유 기능 (SNS, 링크 공유)

---

## 4. 점수 체계 (평가 기준)

### 4.1 총점 구성

총점은 100점 만점이며, 다음 7개 항목의 합산으로 계산됩니다 (가중치 적용 없이 직접 합산).

### 4.2 평가 항목 및 가중치

#### 4.2.1 색상 조화도 (Color Harmony) - 18점

**가중치: 18%**

**평가 기준:**

- 상하의 색상 조화: 0-10점
  - 보색 조합 (Complementary): 8-10점
  - 유사색 조합 (Analogous): 7-9점
  - 단색 조합 (Monochromatic): 6-8점
  - 삼원색 조합 (Triadic): 7-9점
  - 무작위 조합: 0-6점
- 색상 대비 적절성: 0-8점
  - 적절한 대비: 7-8점
  - 과도한 대비: 4-6점
  - 부족한 대비: 2-4점
  - 대비 없음: 0-2점
- 색상 톤 일관성: 0-7점
  - 톤 일치 (따뜻한 톤/차가운 톤): 6-7점
  - 톤 부분 일치: 4-5점
  - 톤 불일치: 0-3점

**점수 계산:**

```
색상 조화도 점수 = (상하의 색상 조화 × 0.4) + (색상 대비 적절성 × 0.32) + (색상 톤 일관성 × 0.28)
최종 점수 = (색상 조화도 점수 / 10) × 18
```

#### 4.2.2 스타일 일관성 (Style Consistency) - 18점

**가중치: 18%**

**평가 기준:**

- 상하의 스타일 매칭: 0-8점
  - 완벽한 일치 (캐주얼+캐주얼, 포멀+포멀): 7-8점
  - 부분 일치: 5-6점
  - 스타일 혼재: 3-4점
  - 완전 불일치: 0-2점
- 전체적인 스타일 통일성: 0-7점
  - 높은 통일성: 6-7점
  - 보통 통일성: 4-5점
  - 낮은 통일성: 2-3점
  - 통일성 없음: 0-1점
- 계절성 적합도: 0-5점
  - 계절에 적합: 4-5점
  - 부분 적합: 2-3점
  - 부적합: 0-1점

**점수 계산:**

```
스타일 일관성 점수 = (상하의 스타일 매칭 × 0.4) + (전체적인 스타일 통일성 × 0.35) + (계절성 적합도 × 0.25)
최종 점수 = (스타일 일관성 점수 / 10) × 18
```

#### 4.2.3 패턴 조합 (Pattern Combination) - 10점

**가중치: 10%**

**평가 기준:**

- 패턴 조합 적절성: 0-10점
  - 무지+패턴 (최적): 9-10점
  - 무지+무지: 7-8점
  - 유사 패턴 조합: 5-6점
  - 대비 패턴 조합: 4-5점
  - 충돌 패턴 조합: 0-3점
- 패턴 크기 조화: 0-5점
  - 적절한 크기 조화: 4-5점
  - 부분 조화: 2-3점
  - 크기 불일치: 0-1점

**점수 계산:**

```
패턴 조합 점수 = (패턴 조합 적절성 × 0.67) + (패턴 크기 조화 × 0.33)
최종 점수 = (패턴 조합 점수 / 10) × 10
```

#### 4.2.4 비율 및 실루엣 (Proportion & Silhouette) - 10점

**가중치: 10%**

**평가 기준:**

- 상하의 길이 비율: 0-6점
  - 황금비율 (1:1.618 또는 2:3): 5-6점
  - 적절한 비율: 4-5점
  - 보통 비율: 2-3점
  - 부적절한 비율: 0-1점
- 실루엣 조화: 0-5점
  - 조화로운 실루엣: 4-5점
  - 보통 실루엣: 2-3점
  - 불조화 실루엣: 0-1점
- 전체적인 균형감: 0-4점
  - 우수한 균형: 3-4점
  - 보통 균형: 2점
  - 불균형: 0-1점

**점수 계산:**

```
비율 및 실루엣 점수 = (상하의 길이 비율 × 0.4) + (실루엣 조화 × 0.33) + (전체적인 균형감 × 0.27)
최종 점수 = (비율 및 실루엣 점수 / 10) × 10
```

#### 4.2.5 텍스처 조화 (Texture Harmony) - 10점

**가중치: 10%** (변경 없음)

**평가 기준:**

- 텍스처 조합 적절성: 0-6점
  - 조화로운 조합 (면+데님, 니트+면): 5-6점
  - 보통 조합: 3-4점
  - 부적절한 조합: 0-2점
- 텍스처 대비: 0-4점
  - 적절한 대비: 3-4점
  - 과도한 대비: 1-2점
  - 대비 없음: 0점

**점수 계산:**

```
텍스처 조화 점수 = (텍스처 조합 적절성 × 0.6) + (텍스처 대비 × 0.4)
최종 점수 = (텍스처 조화 점수 / 10) × 10
```

#### 4.2.6 상황 적합성 (Context Appropriateness) - 30점

**가중치: 30%**

**평가 기준:**

- **Time (시간) 적합성**: 0-10점
  - 선택한 시간대에 적합한 스타일: 8-10점
  - 부분 적합: 5-7점
  - 부적합: 0-4점

- **Place (장소) 적합성**: 0-10점
  - 사무실: 포멀 스타일 적합 시 9점
  - 캐주얼 장소: 캐주얼 스타일 적합 시 9점
  - 파티/행사: 드레시한 스타일 적합 시 8점
  - 부분 적합: 6점
  - 부적합: 0-4점

- **Occasion (상황) 적합성**: 0-10점
  - 비즈니스: 포멀 스타일 적합 시 9-10점
  - 캐주얼: 캐주얼 스타일 적합 시 9점
  - 데이트: 드레시한 스타일 적합 시 8점
  - 정장: 포멀 스타일 완벽 일치 시 10점
  - 부분 적합: 6점
  - 부적합: 0-4점

**점수 계산:**

```
상황 적합성 점수 = Time 적합성 + Place 적합성 + Occasion 적합성
최종 점수 = min(상황 적합성 점수, 30)
```

**참고**: TPO 정보가 제공되지 않은 경우 기본값 20점 부여

#### 4.2.7 전체적 조화 (Overall Harmony) - 4점

**가중치: 4%**

**평가 기준:**

- 종합적인 시각적 조화: 0-5점
  - 매우 조화로움: 4-5점
  - 조화로움: 3점
  - 보통: 2점
  - 불조화: 0-1점

**점수 계산:**

```
전체적 조화 점수 = 종합적인 시각적 조화 점수
최종 점수 = min(전체적 조화 점수, 4)
```

### 4.3 총점 계산 공식

```
총점 = 색상 조화도 + 스타일 일관성 + 패턴 조합 + 비율 및 실루엣 + 
       텍스처 조화 + 상황 적합성 + 전체적 조화

= 18 + 18 + 10 + 10 + 10 + 30 + 4 = 100점
```

**참고**: 가중치 적용 없이 각 항목 점수를 직접 합산하여 총점 계산

### 4.4 등급 체계

| 총점 범위 | 등급 | 설명                      |
| --------- | ---- | ------------------------- |
| 90-100점  | S    | 최고 수준의 패션 스타일   |
| 80-89점   | A    | 우수한 패션 스타일        |
| 70-79점   | B    | 양호한 패션 스타일        |
| 60-69점   | C    | 보통 수준의 패션 스타일   |
| 50-59점   | D    | 개선이 필요한 패션 스타일 |
| 0-49점    | F    | 전면적인 개선 필요        |

---

## 5. 비기능 요구사항

### 5.1 성능 요구사항

- 이미지 업로드 응답 시간: 2초 이내
- AI 분석 처리 시간: 15초 이내
- 페이지 로딩 시간: 3초 이내
- 동시 사용자 지원: 최소 100명

### 5.2 보안 요구사항

- 업로드된 이미지의 개인정보 보호
- HTTPS 통신 필수
- 이미지 파일 검증 (악성 파일 방지)
- 서버 측 이미지 크기 제한
- 얼굴 모자이징 옵션 (선택사항)

### 5.3 호환성 요구사항

- 브라우저 지원: Chrome, Safari, Firefox, Edge (최신 2개 버전)
- 모바일 브라우저 지원: iOS Safari, Chrome Mobile
- 반응형 디자인으로 다양한 화면 크기 지원

### 5.4 사용성 요구사항

- 직관적인 사용자 인터페이스
- 명확한 점수 표시 및 해석
- 구체적이고 실행 가능한 개선점 제시
- 접근성 고려 (WCAG 2.1 Level AA 준수)

---

## 6. 사용자 스토리

### 6.1 사용자 스토리 1: 사진 업로드 및 분석

**As a** 사용자  
**I want to** 상하의를 입고 있는 내 사진을 업로드하고 분석받고 싶다  
**So that** 내 패션 스타일에 대한 객관적인 평가를 받을 수 있다

**Acceptance Criteria:**

- 사진 1장 업로드 가능
- 드래그 앤 드롭으로 이미지 업로드 가능
- 업로드된 이미지 미리보기 확인 가능
- 잘못된 형식의 파일 업로드 시 에러 메시지 표시
- 분석 시작 버튼 클릭

### 6.2 사용자 스토리 2: 점수 확인

**As a** 사용자  
**I want to** 총점과 세부 점수를 확인하고 싶다  
**So that** 어떤 부분이 좋고 나쁜지 구체적으로 알 수 있다

**Acceptance Criteria:**

- 총점 (0-100점) 표시
- 등급 (S, A, B, C, D, F) 표시
- 7개 평가 항목별 점수 표시
- 점수 차트/그래프로 시각화
- 각 항목의 가중치 정보 제공

### 6.3 사용자 스토리 3: 개선점 확인

**As a** 사용자  
**I want to** 낮은 점수 항목에 대한 구체적인 개선 방안을 확인하고 싶다  
**So that** 다음에 더 나은 패션 스타일을 연출할 수 있다

**Acceptance Criteria:**

- 낮은 점수 항목 (60점 미만) 식별
- 각 항목별 구체적인 개선 제안 제공
- 색상 조합 개선 예시
- 스타일 조정 권장사항
- 실행 가능한 피드백 제공

---

## 7. 기술 스택

### 7.1 프론트엔드

- **프레임워크**: Next.js (React 기반, Vercel 최적화)
- **스타일링**: Tailwind CSS
- **이미지 처리**: HTML5 Canvas API, react-dropzone
- **차트/그래프**: Recharts 또는 Chart.js
- **상태 관리**: React Context API 또는 Zustand
- **Supabase 클라이언트**: @supabase/supabase-js

### 7.2 백엔드 및 데이터베이스

- **BaaS (Backend as a Service)**: Supabase
  - **데이터베이스**: PostgreSQL (Supabase 관리형)
  - **스토리지**: Supabase Storage (이미지 저장 및 CDN)
  - **인증**: Supabase Auth (필요시 사용자 인증)
  - **API**: Supabase REST API (자동 생성)
- **서버리스 함수**: Vercel Serverless Functions
  - AI 분석 처리용 API 엔드포인트
  - 이미지 전처리 및 후처리

### 7.3 AI/ML (구현 방식)

#### 7.3.1 이미지 분석: Google Gemini API (현재 구현)

- **모델**: Gemini Vision API (gemini-3.0-flash, gemini-3.0-pro 등)
- **기능**:
  - 상의/하의 색상 추출 (HEX 코드)
  - 패턴 인식 (solid, striped, checked, floral, dot, geometric)
  - 스타일 분류 (casual, formal, sporty, vintage, minimal)
  - 텍스처 분석 (cotton, denim, knit, silk, leather)
  - 계절성 감지 (spring, summer, fall, winter)
- **장점**: 빠른 구현, 높은 정확도, 다양한 모델 지원

#### 7.3.2 텍스트 생성: Google Gemini API

- **모델**: Gemini API (gemini-3.0-flash, gemini-3.0-pro 등)
- **기능**:
  - 패션 비평가 평가 생성
  - 구매 추천 아이템 생성
- **프롬프트 엔지니어링**: 구조화된 JSON 응답 생성

#### 7.3.3 대안 옵션 (향후 고려)

- **인물/의류 분리**:
  - Remove.bg API (배경 제거)
  - Segment Anything Model (SAM) API
- **이미지 분석**:
  - Replicate API (CLIP, Fashion-CLIP)
  - Hugging Face Inference API
  - Google Cloud Vision API
- **색상 분석**:
  - ColorThief.js (자체 구현)
  - Google Cloud Vision API

### 7.4 인프라 및 배포

- **프론트엔드 호스팅**: Vercel
- **데이터베이스 및 스토리지**: Supabase
- **CDN**: Vercel Edge Network + Supabase Storage CDN
- **모니터링**: Vercel Analytics, Supabase Dashboard

---

## 8. UI/UX 요구사항

### 8.1 레이아웃 구조

1. **헤더**

   - 로고/브랜드명
   - 간단한 네비게이션

2. **메인 컨텐츠 영역**

   - **업로드 섹션**
     - TPO 선택 (Time, Place, Occasion)
     - 드래그 앤 드롭 존
     - 업로드된 이미지 미리보기
     - 분석 시작 버튼
   - **로딩 섹션**
     - 분석 진행 상태 표시
     - 예상 소요 시간 안내
   - **결과 섹션**
     - 총점 및 등급 대형 표시
     - 세부 점수 차트/그래프
     - 패션 비평가 평가
     - 개선점 리스트
     - 구매 추천 아이템 (무신사 검색 연동)
     - 원본 이미지와 분석 결과 나란히 표시

3. **푸터**
   - 저작권 정보

### 8.2 점수 표시 디자인

- **총점 표시**

  - 대형 숫자 (예: 85점)
  - 등급 배지 (S, A, B, C, D, F)
  - 진행 바 (Progress Bar)
  - 색상 코딩 (녹색: 80+, 노란색: 60-79, 빨간색: 60 미만)

- **세부 점수 표시**
  - 레이더 차트 (Radar Chart) - 7개 항목
  - 막대 그래프 (Bar Chart) - 항목별 점수
  - 항목별 점수 카드
  - 가중치 정보 표시
  - 상황적합성 항목 포함 (30점 만점)

### 8.3 개선점 표시 디자인

- 낮은 점수 항목 강조
- 구체적인 개선 제안 카드
- 아이콘과 텍스트 조합
- 실행 가능한 액션 아이템

### 8.4 사용자 경험 플로우

```
1. 사용자 접속
   ↓
2. TPO 선택 (Time, Place, Occasion)
   ↓
3. 사진 업로드 (드래그 앤 드롭 또는 파일 선택)
   ↓
4. 이미지 미리보기 확인
   ↓
5. "분석 시작" 버튼 클릭
   ↓
6. 로딩 화면 표시 (분석 진행 중, 10-15초)
   ↓
7. 결과 표시
   - 총점 및 등급
   - 세부 점수 차트 (7개 항목, 상황적합성 포함)
   - 패션 비평가 평가
   - 개선점 리스트
   - 구매 추천 아이템
   ↓
8. 무신사 검색 (추천 아이템 클릭)
   ↓
9. 결과 확인 및 공유 (선택사항)
```

---

## 9. 데이터 모델 (Supabase PostgreSQL 스키마)

### 9.1 데이터베이스 스키마

#### 9.1.1 fashion_evaluations 테이블

평가 결과 저장

```sql
CREATE TABLE fashion_evaluations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  image_id UUID NOT NULL,
  image_url TEXT NOT NULL,
  total_score DECIMAL(5,2) NOT NULL CHECK (total_score >= 0 AND total_score <= 100),
  grade VARCHAR(1) NOT NULL CHECK (grade IN ('S', 'A', 'B', 'C', 'D', 'F')),

  -- 세부 점수
  color_harmony_score DECIMAL(5,2) NOT NULL,
  style_consistency_score DECIMAL(5,2) NOT NULL,
  pattern_combination_score DECIMAL(5,2) NOT NULL,
  proportion_silhouette_score DECIMAL(5,2) NOT NULL,
  texture_harmony_score DECIMAL(5,2) NOT NULL,
  context_appropriateness_score DECIMAL(5,2) NOT NULL,
  overall_harmony_score DECIMAL(5,2) NOT NULL,

  -- TPO 정보
  tpo_time VARCHAR(50),
  tpo_place VARCHAR(50),
  tpo_occasion VARCHAR(50),

  -- 분석 결과 메타데이터
  analysis_metadata JSONB, -- 상의/하의 색상, 패턴, 스타일 등 상세 정보

  -- 사용자 정보
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  session_id VARCHAR(255),

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 인덱스
CREATE INDEX idx_fashion_evaluations_user_id ON fashion_evaluations(user_id);
CREATE INDEX idx_fashion_evaluations_session_id ON fashion_evaluations(session_id);
CREATE INDEX idx_fashion_evaluations_total_score ON fashion_evaluations(total_score DESC);
CREATE INDEX idx_fashion_evaluations_created_at ON fashion_evaluations(created_at DESC);
```

#### 9.1.2 improvement_suggestions 테이블

개선점 저장

```sql
CREATE TABLE improvement_suggestions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  evaluation_id UUID NOT NULL REFERENCES fashion_evaluations(id) ON DELETE CASCADE,
  category VARCHAR(50) NOT NULL, -- 'color', 'style', 'pattern', etc.
  score DECIMAL(5,2) NOT NULL,
  suggestion_text TEXT NOT NULL,
  priority INTEGER NOT NULL CHECK (priority >= 1 AND priority <= 5), -- 1: 높음, 5: 낮음
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 인덱스
CREATE INDEX idx_improvement_suggestions_evaluation_id ON improvement_suggestions(evaluation_id);
CREATE INDEX idx_improvement_suggestions_priority ON improvement_suggestions(priority);
```

### 9.2 Supabase Storage 구조

```
storage/
└── fashion-images/
    ├── {session_id}/
    │   └── {evaluation_id}.jpg
    └── {user_id}/
        └── {evaluation_id}.jpg
```

### 9.3 Row Level Security (RLS) 정책

#### 9.3.1 fashion_evaluations 테이블 RLS

```sql
ALTER TABLE fashion_evaluations ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Evaluations are viewable by owner"
  ON fashion_evaluations FOR SELECT
  USING (auth.uid() = user_id OR session_id = current_setting('app.session_id', true));

CREATE POLICY "Users can insert their own evaluations"
  ON fashion_evaluations FOR INSERT
  WITH CHECK (true);

CREATE POLICY "Users can delete their own evaluations"
  ON fashion_evaluations FOR DELETE
  USING (auth.uid() = user_id OR session_id = current_setting('app.session_id', true));
```

---

## 10. AI 분석 상세 요구사항

### 10.1 이미지 전처리

- 배경 제거 또는 인물 분리
- 상의 영역 자동 인식 및 추출
- 하의 영역 자동 인식 및 추출
- 이미지 정규화 (크기, 밝기 조정)

### 10.2 색상 분석

- 상의 주요 색상 3-5개 추출
- 하의 주요 색상 3-5개 추출
- 색상 조화도 계산 (색상환 기반)
- 색상 대비 분석
- 색상 톤 분석 (따뜻한 톤/차가운 톤)

### 10.3 패턴 인식

- 무지 (Solid)
- 줄무늬 (Striped)
- 체크 (Checked/Grid)
- 플로럴 (Floral)
- 도트 (Polka Dot)
- 기하학적 패턴 (Geometric)

### 10.4 스타일 분류

- 캐주얼
- 포멀/비즈니스
- 스포츠/액티브
- 빈티지
- 미니멀
- 스트리트

### 10.5 비율 및 실루엣 분석

- 상하의 길이 비율 계산
- 실루엣 타입 분류 (피팅, 오버핏, 릴랙스드)
- 전체적인 균형감 평가

### 10.6 텍스처 분석

- 면, 데님, 니트, 실크 등 텍스처 인식
- 텍스처 조합 적절성 평가

### 10.7 상황 적합성 분석

- 계절 감지 (또는 사용자 입력)
- 상황 분류 (비즈니스, 캐주얼, 파티 등)
- 적합성 평가

---

## 11. 개선점 생성 로직

### 11.1 개선점 생성 규칙

#### 11.1.1 색상 조화도 개선점 (11점 미만 시, 18점 만점 기준)

- **점수 9-10.9점**:
  - "상하의 색상 조화를 개선하세요. 보색 관계나 유사색 조합을 시도해보세요."
  - "팁: 빨강-청록, 노랑-보라 같은 보색 조합이 시각적으로 매력적입니다."
- **점수 7-8.9점**:
  - "색상 조합이 충돌하고 있습니다. 중성색(검정, 흰색, 회색)을 활용해보세요."
  - "한 가지 색상을 기준으로 다른 색상을 선택하는 것을 권장합니다."
- **점수 0-6.9점**:
  - "색상 조합을 전면적으로 재검토하세요. 무지 아이템으로 시작하는 것을 권장합니다."

#### 11.1.2 스타일 일관성 개선점 (11점 미만 시, 18점 만점 기준)

- **점수 9-10.9점**:
  - "상하의 스타일을 더 일치시키면 통일감 있는 룩을 연출할 수 있습니다."
  - "계절에 맞는 의류를 선택하세요."
- **점수 7-8.9점**:
  - "스타일이 혼재되어 있습니다. 한 가지 스타일로 통일하는 것을 권장합니다."
- **점수 0-6.9점**:
  - "스타일이 완전히 불일치합니다. 캐주얼 또는 포멀 중 하나로 통일하세요."

#### 11.1.3 패턴 조합 개선점 (6점 미만 시, 10점 만점 기준)

- **점수 5-5.9점**:
  - "패턴 조합을 개선하세요. 무지 아이템과 패턴 아이템을 조합하는 것을 권장합니다."
- **점수 4-4.9점**:
  - "패턴이 충돌하고 있습니다. 한 가지 패턴만 사용하거나 무지 아이템으로 교체하세요."
- **점수 0-3.9점**:
  - "패턴 조합을 전면적으로 재검토하세요. 무지 아이템으로 시작하는 것을 권장합니다."

#### 11.1.4 비율 및 실루엣 개선점 (6점 미만 시, 10점 만점 기준)

- **점수 5-5.9점**:
  - "상하의 길이 비율을 조정하면 더 균형잡힌 실루엣을 만들 수 있습니다."
- **점수 4-4.9점**:
  - "비율이 부적절합니다. 상의 또는 하의 길이를 조정해보세요."
- **점수 0-3.9점**:
  - "실루엣이 불균형합니다. 의류의 길이와 핏을 재검토하세요."

#### 11.1.5 텍스처 조화 개선점 (6점 미만 시, 10점 만점 기준)

- **점수 5-5.9점**:
  - "텍스처 조합을 개선하세요. 면과 데님, 니트와 면 같은 조화로운 조합을 시도해보세요."
- **점수 0-4.9점**:
  - "텍스처가 충돌하고 있습니다. 유사한 텍스처로 통일하거나 대비를 줄이세요."

#### 11.1.6 상황 적합성 개선점 (18점 미만 시, 30점 만점 기준)

- **점수 12-17점**:
  - "TPO에 부분적으로 맞지 않습니다. 더 적합한 스타일로 조정하세요."
  - "팁: 비즈니스 상황에는 포멀한 스타일, 캐주얼 상황에는 편안한 스타일을 선택하세요."
- **점수 0-11점**:
  - "선택한 TPO(시간, 장소, 상황)에 맞지 않는 스타일입니다. 상황에 적합한 의류로 교체하세요."
  - "비즈니스 상황에는 정장이나 포멀한 의류를, 캐주얼 상황에는 편안한 의류를 선택하세요."

### 11.2 개선점 우선순위

각 평가 항목의 만점 대비 비율로 우선순위 결정:

1. **우선순위 1 (높음)**: 만점의 50% 미만 (예: 색상 조화도 9점 미만, 상황적합성 15점 미만)
2. **우선순위 2 (중간)**: 만점의 50-70% (예: 색상 조화도 9-12.6점, 상황적합성 15-21점)
3. **우선순위 3 (낮음)**: 만점의 70-80% (예: 색상 조화도 12.6-14.4점, 상황적합성 21-24점)

### 11.3 개선점 표시 형식

```
[항목명] (현재 점수: XX점 / 만점)
→ [구체적인 개선 제안]
→ [추가 팁 또는 예시]
```

예시:

```
색상 조화도 (현재 점수: 9.0점 / 18점)
→ 상하의 색상 조화를 개선하세요. 보색 관계나 유사색 조합을 시도해보세요.
→ 팁: 빨강-청록, 노랑-보라 같은 보색 조합이 시각적으로 매력적입니다.
```

### 11.4 구매 추천 아이템 생성

#### 11.4.1 추천 아이템 생성 로직

- **생성 시점**: 개선점 생성 후, 우선순위 1-2인 항목을 기반으로 생성
- **AI 활용**: Gemini API를 사용하여 개선을 위한 구체적인 구매 추천 아이템 생성
- **추천 기준**:
  - 낮은 점수 항목 개선에 도움이 되는 아이템
  - 현재 패션 스타일과 조화를 이루는 아이템
  - TPO에 적합한 아이템

#### 11.4.2 추천 아이템 정보

각 추천 아이템은 다음 정보를 포함:

- **카테고리**: 상의, 하의, 액세서리
- **아이템 이름**: 구체적인 제품명 (예: "화이트 셔츠", "네이비 슬랙스")
- **설명**: 아이템에 대한 간단한 설명
- **추천 색상**: HEX 코드 또는 색상명
- **스타일**: casual, formal, sporty 등
- **추천 이유**: 이 아이템을 추천하는 구체적인 이유

#### 11.4.3 무신사 검색 연동

- 각 추천 아이템에 "무신사에서 검색하기" 버튼 제공
- 클릭 시 무신사 검색 페이지로 이동
- 검색어는 카테고리, 아이템 이름, 색상 정보를 조합하여 생성
- 새 창에서 검색 결과 표시

---

## 12. 개발 단계 (MVP 기준)

### Phase 1: 프로젝트 설정 및 기본 인프라 (1주)

- [ ] Next.js 프로젝트 초기화
- [ ] Vercel 프로젝트 생성 및 연동
- [ ] Supabase 프로젝트 생성 및 설정
  - [ ] 데이터베이스 스키마 생성 (fashion_evaluations, improvement_suggestions)
  - [ ] Storage Bucket 생성 (fashion-images)
  - [ ] RLS 정책 설정
- [ ] 환경 변수 설정 (.env.local)
- [ ] Git 저장소 설정 및 Vercel 자동 배포 연동

### Phase 2: 기본 기능 구현 (2-3주)

- [ ] Next.js 기본 레이아웃 구성
- [ ] Tailwind CSS 설정
- [ ] Supabase 클라이언트 설정
- [ ] 이미지 업로드 기능 구현
  - [ ] react-dropzone 통합
  - [ ] Supabase Storage 업로드
  - [ ] 이미지 미리보기
- [ ] 세션 관리 (비로그인 사용자 추적)
- [ ] 기본 UI/UX 구현

### Phase 3: AI 분석 기능 구현 (3-4주)

#### 3.1 AI 구현 방식 결정

- [ ] AI 구현 전략 선택 (자체 구축 vs API 활용 vs 하이브리드)
- [ ] 비용 및 성능 분석
- [ ] 필요한 API 키 발급

#### 3.2 인프라 설정

- [ ] Vercel Serverless Functions 설정
  - [ ] `/api/analyze-fashion` 엔드포인트 생성
- [ ] 이미지 전처리 파이프라인 구축
  - [ ] 인물/의류 분리 (Remove.bg API 또는 MediaPipe)
  - [ ] 상의/하의 영역 추출
  - [ ] 이미지 정규화

#### 3.3 AI 분석 모듈 개발

- [ ] 색상 분석 모듈 (ColorThief.js 또는 API)
- [ ] 패턴 인식 모듈
- [ ] 스타일 분류 모듈
- [ ] 비율 및 실루엣 분석 모듈
- [ ] 텍스처 분석 모듈
- [ ] 상황 적합성 분석 모듈

#### 3.4 점수 계산 시스템

- [ ] 각 평가 항목별 점수 계산 로직
- [ ] 가중치 적용 총점 계산
- [ ] 등급 매기기 로직
- [ ] 점수 정규화 및 검증

#### 3.5 개선점 생성 시스템

- [ ] 개선점 생성 로직 구현
- [ ] 우선순위 결정 알고리즘
- [ ] 개선점 템플릿 정의

#### 3.6 데이터 저장

- [ ] 분석 결과 Supabase에 저장
- [ ] 개선점 데이터베이스에 저장
- [ ] 캐싱 전략 구현

### Phase 4: 결과 표시 및 최적화 (2주)

- [ ] 결과 시각화 기능 구현
  - [ ] 총점 및 등급 대형 표시
  - [ ] 레이더 차트 (7개 항목)
  - [ ] 막대 그래프 (항목별 점수)
  - [ ] 개선점 리스트 표시
- [ ] 데이터베이스에서 결과 조회
- [ ] 결과 공유 기능 (링크 생성)
- [ ] 성능 최적화
  - [ ] 이미지 최적화 (WebP 변환)
  - [ ] Lazy Loading 구현
  - [ ] 캐싱 전략 수립

### Phase 5: 테스트 및 배포 (1-2주)

- [ ] 단위 테스트
- [ ] 통합 테스트
- [ ] E2E 테스트
- [ ] Vercel 프로덕션 배포
- [ ] Supabase 프로덕션 환경 설정
- [ ] 모니터링 설정
- [ ] 사용자 테스트 및 피드백 수집

---

## 13. 성공 지표 (KPI)

### 13.1 사용성 지표

- 이미지 업로드 성공률: 95% 이상
- 분석 완료율: 90% 이상
- 사용자 만족도: 4.0/5.0 이상
- 개선점 유용성 평가: 4.0/5.0 이상

### 13.2 성능 지표

- 평균 분석 시간: 15초 이내
- 페이지 로딩 시간: 3초 이내
- 에러 발생률: 5% 이하

### 13.3 사용자 참여 지표

- 재방문률: 30% 이상
- 결과 공유율: 15% 이상
- 평균 세션 시간: 2분 이상

---

## 14. 제약사항 및 고려사항

### 14.1 기술적 제약사항

- **Vercel Serverless Functions 제한**
  - 실행 시간 제한: Hobby 플랜 10초, Pro 플랜 60초
  - 메모리 제한: 1024MB
  - 대응: AI 분석을 비동기 처리하거나 외부 API 활용
- **Supabase Storage 제한**
  - 무료 플랜: 1GB 스토리지
  - 파일 크기 제한: 50MB
  - 대응: 이미지 압축 및 최적화
- **인물 인식 정확도**
  - 다양한 각도, 조명 조건에서의 정확도
  - 대응: 여러 AI 모델 비교 테스트, 전처리 강화

### 14.2 비즈니스 제약사항

- **AI 구현 비용**
  - API 활용 시: 사용량 기반 과금
  - 자체 구축 시: 개발 시간 증가
- 사용자 데이터 프라이버시 보호
- 초기 개발 시간 및 리소스 제약

### 14.3 향후 개선 사항

- 사용자 피드백 기반 모델 개선
- 더 많은 의류 카테고리 추가 (아우터, 신발, 액세서리)
- 개인화된 스타일 추천
- 히스토리 기능 (과거 평가 결과 비교)
- 소셜 기능 (다른 사용자와 점수 비교)
- AI 기반 의류 추천 (개선된 스타일 제안)

---

## 15. 리스크 관리

### 15.1 기술적 리스크

- **AI 모델 정확도 부족**
  - 대응: 여러 모델 비교 테스트, 충분한 테스트 데이터로 검증
- **인물/의류 분리 실패**
  - 대응: 여러 분리 알고리즘 준비, 폴백 메커니즘
- **이미지 처리 성능 이슈**
  - 대응: 이미지 최적화, CDN 활용, 비동기 처리
- **Vercel Serverless Functions 타임아웃**

  - 대응: AI 분석을 외부 서비스로 위임, 비동기 작업 큐 사용

- **외부 AI API 의존성 리스크**
  - API 서비스 다운타임
  - 대응: 여러 API 제공자 준비, 폴백 메커니즘
  - API 비용 급증
  - 대응: 사용량 모니터링, Rate Limiting, 캐싱 전략

### 15.2 사용자 경험 리스크

- **분석 시간이 너무 길 경우**

  - 대응: 진행 상태 표시, 예상 시간 안내, 백그라운드 처리

- **점수에 대한 사용자 불만**

  - 대응: 점수 기준 명확히 설명, 개선점을 긍정적으로 제시

- **개선점이 너무 일반적이거나 유용하지 않은 경우**
  - 대응: 구체적이고 실행 가능한 개선점 생성, 사용자 피드백 수집

---

## 16. 참고 자료 및 리소스

### 16.1 AI API 서비스

- **Remove.bg**: 배경 제거 및 인물 분리
- **Replicate API**: 이미지 분석 모델
- **Hugging Face Inference API**: 다양한 컴퓨터 비전 모델
- **Google Cloud Vision API**: 이미지 라벨링, 색상 감지
- **MediaPipe**: 구글의 인물 분할 솔루션

### 16.2 자체 모델 구축 리소스

- **ColorThief.js**: JavaScript 색상 추출
- **TensorFlow.js**: 브라우저에서 ML 모델 실행
- **OpenCV**: 이미지 처리
- **Fashion-MNIST**: 패션 데이터셋

### 16.3 패션 이론

- 색상 조화 이론 (Color Harmony Theory)
- 패션 스타일링 원칙
- 비율 및 실루엣 이론

---

## 17. Supabase 및 Vercel 설정 가이드

### 17.1 Supabase 설정

1. Supabase 프로젝트 생성
2. 데이터베이스 스키마 생성 (SQL Editor)
3. Storage Bucket 생성 (fashion-images)
4. RLS 정책 설정

### 17.2 Vercel 설정

1. GitHub 저장소에 코드 푸시
2. Vercel에서 프로젝트 import
3. 환경 변수 설정:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`
   - AI API 키들 (선택사항)

### 17.3 프로젝트 구조 예시

```
project_2/
├── app/
│   ├── layout.tsx
│   ├── page.tsx
│   ├── api/
│   │   ├── analyze-fashion/
│   │   └── search-musinsa/
│   └── components/
│       ├── ImageUpload.tsx
│       ├── ScoreDisplay.tsx
│       ├── ScoreChart.tsx
│       ├── ImprovementList.tsx
│       └── ProductRecommendations.tsx
├── lib/
│   ├── supabase/
│   ├── ai/
│   │   ├── geminiAnalysis.ts
│   │   ├── geminiCriticReview.ts
│   │   ├── productRecommendations.ts
│   │   ├── scoreCalculation.ts
│   │   └── improvementSuggestions.ts
│   └── utils/
├── supabase/
│   └── migrations/
├── .env.local
└── package.json
```

---

## 18. 승인 및 검토

### 18.1 문서 버전

- 버전: 1.0
- 작성일: 2025년
- 최종 수정일: 2025년

### 18.2 검토자

- [ ] 프로젝트 매니저
- [ ] 기술 리더
- [ ] 디자이너
- [ ] AI/ML 엔지니어

### 18.3 승인

- [ ] 프로젝트 스폰서
- [ ] 기술 팀 리더

---

**문서 끝**
